<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="flex justify-center mt-4">
      <button
        id="whatsAppBtn"
        class="bg-green-600 text-white border-none px-8 py-4 text-xl rounded-full"
      >
        Join Whatsapp Group
      </button>
    </div>
    <script>
      const sellerName = "SACHIN";

      // Format date to "Day(st/nd/rd/th) Month, Year"
      const formatDate = (dateString) => {
        const date = new Date(dateString);
        const day = date.getDate();
        const ordinalSuffix = (day) => {
          if (day > 3 && day < 21) return "th";
          switch (day % 10) {
            case 1:
              return "st";
            case 2:
              return "nd";
            case 3:
              return "rd";
            default:
              return "th";
          }
        };
        return `${day}${ordinalSuffix(day)} ${date.toLocaleDateString("en-US", {
          month: "long",
          year: "numeric",
        })}`;
      };

      // Format time to "HH:MM AM/PM"
      const formatTime = (dateString) => {
        const date = new Date(dateString);
        return date.toLocaleTimeString("en-US", {
          hour: "numeric",
          minute: "2-digit",
          hour12: true,
        });
      };

      // Fetch ongoing workshop details
      const fetchOngoingWorkshopDetails = async () => {
        try {
          const res = await fetch(
            `https://auth-test-8eyl.onrender.com/api/reset/ongoing?sellerName=${sellerName}`
          );
          if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);

          const { data } = await res.json();
          console.log(data);
          const { workshopDate, workshopTime, whatsappGroupLink } = data;
          document
            .getElementById("whatsAppBtn")
            .addEventListener("click", () => {
              window.open(whatsappGroupLink, "_blank");
            });
        } catch (error) {
          document.getElementById("noWorkshopDetails").style.display = "flex";
        }
      };
      fetchOngoingWorkshopDetails();
    </script>
  </body>
</html>
